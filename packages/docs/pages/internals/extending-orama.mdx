# Extending Orama

Orama exposes some of its internal functions:

```javascript copy
import {
  formatNanoseconds,
  getNanosecondsTime,
  intersectTokenScores,
  includes,
  boundedLevenshtein,
  tokenize,
} from '@orama/orama/internals'
```

Every exposed method comes with its own type definition.

Let's break them down:

### `formatNanoseconds`

Takes a `BigInt` as input and returns a human-readable `string`.

```javascript copy
import { formatNanoseconds } from '@orama/orama/internals'

formatNanoseconds(30000n) // '30Î¼s'
```

### `getNanosecondsTime`

Gets the current time with nanoseconds-precision. Returns a `BigInt`.

```javascript copy
import { getNanosecondsTime } from '@orama/orama/internals'

getNanosecondsTime() // 1363500821581208n
```

### `intersectTokenScores`

Returns the intersection of `N` arrays.

```javascript copy
import { intersectTokenScores } from '@orama/orama/internals'

intersectTokenScores([
  [
    ['foo', 1],
    ['bar', 1],
    ['baz', 2],
  ],
  [
    ['foo', 4],
    ['quick', 10],
    ['brown', 3],
    ['bar', 2],
  ],
  [
    ['fox', 12],
    ['foo', 4],
    ['jumps', 3],
    ['bar', 6],
  ],
])

// Result: [['foo', 9], ['bar', 9]]
```

### `includes`

faster alternative to `Array.prototype.includes`.

```javascript copy
import { includes } from '@orama/orama/internals'

includes([10, 20, 30], 10) // true
```

### `boundedLevenshtein`

Computes the Levenshtein distance between two strings `(a, b)`, returning early with -1 if the distance is greater than the given tolerance. It assumes that `tolerance >= ||a| - |b|| >= 0`.

```javascript copy
import { boundedLevenshtein } from '@orama/orama/internals'

boundedLevenshtein('moon', 'lions', 3) // { isBounded: true, distance: 3 }
```

# CommonJS Imports

When using CommonJS, internals can be imported in two ways:

1. Use `await import` inside an async function:

   ```js
   const { tokenize } = await import('@orama/orama/internals')
   ```

2. Use the `requireOramaInternals`:

   ```js
   const { requireOramaInternals } = require('@orama/orama/cjs/internals')

   requireOramaInternals((err, { tokenize }) => {
     // ...
   })
   ```
